# aoneng-fe-monitor-wx-mini-program

å¥¥èƒ½ç”µæº--å‰ç«¯ç¨³å®šæ€§ç›‘æ§ å°ç¨‹åºç›‘æ§

## ç®€ä»‹

è¿™æ˜¯å¥¥èƒ½ç”µæºå‰ç«¯å›¢é˜Ÿå¼€å‘çš„å¾®ä¿¡å°ç¨‹åºç¨³å®šæ€§ç›‘æ§ç³»ç»Ÿï¼Œä¸“æ³¨äºå°ç¨‹åºç«¯æ€§èƒ½ä¸é”™è¯¯ç›‘æ§ï¼Œå¸®åŠ©å¼€å‘å›¢é˜Ÿå®æ—¶æŒæ¡ç”¨æˆ·ç«¯å°ç¨‹åºè¿è¡ŒçŠ¶æ€ã€‚

## æ ¸å¿ƒåŠŸèƒ½

### é”™è¯¯ç›‘æ§

- âœ… JavaScript è¿è¡Œæ—¶é”™è¯¯æ•è·
- âœ… ç½‘ç»œè¯·æ±‚å¤±è´¥ç›‘æ§
- âœ… é¡µé¢åŠ è½½å¼‚å¸¸
- âœ… å°ç¨‹åºå¯åŠ¨å¤±è´¥

### æ€§èƒ½ç›‘æ§

- ğŸ“Š å°ç¨‹åºå¯åŠ¨æ€§èƒ½
- â±ï¸ é¡µé¢åˆ‡æ¢æ—¶é—´ç»Ÿè®¡
- ğŸ“ˆ ç½‘ç»œè¯·æ±‚è€—æ—¶ç›‘æ§

### è¡Œä¸ºç›‘æ§

- ğŸ“ ç”¨æˆ·æ“ä½œè½¨è¿¹è®°å½•
- ğŸ”— é¡µé¢è·³è½¬è·Ÿè¸ª

## å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
pnpm install aoneng-fe-monitor-wx-mini-program --save
```

### åŸºç¡€ä½¿ç”¨

```typescript
// app.js
import Monitor from 'aoneng-fe-monitor-wx-mini-program';

const monitor = new Monitor({
  appId: 'your-application-id',
  serverUrl: 'https://monitor-api.example.com/report',
  environment: 'production',
});

// å¯åŠ¨ç›‘æ§
monitor.start();
```

### é…ç½®å‚æ•°

| å‚æ•°å         | ç±»å‹   | æè¿°                                       |
| -------------- | ------ | ------------------------------------------ |
| appId          | string | åº”ç”¨å”¯ä¸€æ ‡è¯†                               |
| serverUrl      | string | æ•°æ®ä¸ŠæŠ¥åœ°å€                               |
| environment    | string | è¿è¡Œç¯å¢ƒï¼ˆproduction/staging/developmentï¼‰ |
| sampleRate     | number | é‡‡æ ·ç‡ï¼ˆ0-1ï¼‰                              |
| maxBreadcrumbs | number | æœ€å¤§è¡Œä¸ºæ ˆé•¿åº¦                             |

## æŠ€æœ¯å®ç°

### æ ¸å¿ƒç‰¹æ€§

1. **å°ç¨‹åºç”Ÿå‘½å‘¨æœŸç›‘æ§** - å…¨é¢è¦†ç›–å°ç¨‹åºå¯åŠ¨ã€é¡µé¢åŠ è½½ã€åˆ‡æ¢ç­‰ç”Ÿå‘½å‘¨æœŸ
2. **ç½‘ç»œè¯·æ±‚æ‹¦æˆª** - è‡ªåŠ¨ç›‘æ§æ‰€æœ‰ wx.request è¯·æ±‚
3. **é”™è¯¯æ•è·** - æ•è·å°ç¨‹åºè¿è¡Œæ—¶é”™è¯¯ä¸å¼‚å¸¸
4. **æ€§èƒ½ä¸ŠæŠ¥** - å®æ—¶ä¸ŠæŠ¥å…³é”®æ€§èƒ½æŒ‡æ ‡

### ä¸ŠæŠ¥æ ¼å¼

ç›‘æ§æ•°æ®é‡‡ç”¨ JSON æ ¼å¼ä¸ŠæŠ¥ï¼ŒåŒ…å«ä»¥ä¸‹æ ¸å¿ƒå­—æ®µï¼š

```json
{
  "appId": "app-123",
  "timestamp": 1620000000000,
  "type": "error",
  "level": "error",
  "message": "å°ç¨‹åºå¯åŠ¨å¤±è´¥",
  "stack": "Error: ...",
  "page": "pages/index/index",
  "userAgent": "MiniProgram 2.0.0"
}
```

## å…¼å®¹æ€§

- âœ… å¾®ä¿¡å°ç¨‹åºåŸºç¡€åº“ 2.2.0+
- âœ… æ”¯ä»˜å®å°ç¨‹åºï¼ˆé€‚é…ä¸­ï¼‰
- âœ… å­—èŠ‚è·³åŠ¨å°ç¨‹åºï¼ˆé€‚é…ä¸­ï¼‰

## å¼€å‘æŒ‡å—

### æœ¬åœ°å¼€å‘

```bash
# å®‰è£…ä¾èµ–
pnpm install

# æ„å»º
pnpm run build

# æµ‹è¯•
pnpm run test
```

## License

MIT
